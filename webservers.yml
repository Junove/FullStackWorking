---
 - hosts: webservers
   become: yes
   tasks:
    - name: Task - 1 Update APT package manager repositories cache
      become: true
      apt:
        update_cache: yes
    - name: Task -2 Install Java
      become: yes
        apt:
        name: openjdk-11-jdk
        state: present
    - name: install apache2
        apt:
          name: apache2
          state: latest
      notify: apache2 service
      tags:
        - base-install
    - name: Remove file
       file:
         path: /va/var/www/html/index.html
         state: absent
     - name: Creating a file with content
       copy:
         dest: "/var/www/html/index.html"
         content: |
           <html>
           <body>
              <h1>Hello, World!</h1>
              <p>I'm a programmer now!</p>
           </body>
           </html>

     - name: ensure the jenkins apt repository key is installed
       apt_key: url=https://pkg.jenkins.io/debian-stable/jenkins.io.key state=present
       become: yes

     - name: ensure the repository is configured
       apt_repository: repo='deb https://pkg.jenkins.io/debian-stable binary/' state=present
       become: yes

     - name: ensure jenkins is installed
       apt: name=jenkins update_cache=yes
       become: yes

     - name: ensure jenkins is running
       service: name=jenkins state=started


   handlers:
     - name: Restart and enable apache2
       service:
         name: apache2
         state: restarted
         enabled: yes
       listen: apache2 service
